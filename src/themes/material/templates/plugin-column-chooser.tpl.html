<ng-template key="column-chooser.tpl" let-$columnChooser>
	<div class="q-grid-column-chooser" layout="column" flex="100">
		<div flex="none" layout="row">
			<mat-form-field class="q-grid-column-chooser-filter" flex>
				<input type="search"
						placeholder="Search"
						 matInput
						 [(ngModel)]="$columnChooser.filter"
						 q-grid-focus />
			</mat-form-field>
		</div>
		<div flex layout="column">
			<ul>
				<li>
					<mat-checkbox [checked]="$columnChooser.stateAll()"
								(change)="$columnChooser.toggleAll.execute()"
								[indeterminate]="$columnChooser.isIndeterminate()">
						Select All
					</mat-checkbox>
				</li>
				<li>
					<mat-checkbox [checked]="$columnChooser.stateDefault()"
								(change)="$columnChooser.defaults.execute()">
						Select Defaults
					</mat-checkbox>
				</li>
			</ul>
			<ul class="q-grid-column-chooser-list">
				<li *ngFor="let column of $columnChooser.columns || $columnChooser.filter"
					 q-grid-drag="$columnChooser.transfer(column)"
					 q-grid-drop="$columnChooser.transfer(column)"
					 q-grid-on-drop="$columnChooser.drop.execute($event)"
					 q-grid-can-drop="$columnChooser.drop.canExecute($event)"
					 q-grid-can-drag="$columnChooser.drag.canExecute($event)">

					<mat-checkbox	*ngIf="$columnChooser.toggle.canExecute(column)"
									[checked]="$columnChooser.state(column)"
									(change)="$columnChooser.toggle.execute(column)"
									[aria-label]="Selection">
						<span>{{column.title || $columnChooser.filter}}</span>
					</mat-checkbox>


					<div class="mat-input-container" *ngIf="$columnChooser.canAggregate">
						<mat-select aria-label="Aggregation"
									  [(ngModel)]="column.aggregation"
									  (change)="$columnChooser.toggleAggregation.execute(column)">
							<mat-option><em>Aggregation</em></mat-option>
							<mat-option *ngFor="let aggregation of $columnChooser.aggregations"
										  [value]="aggregation">
								{{aggregation}}
							</mat-option>
						</mat-select>
					</div>
				</li>
			</ul>
		</div>
		<div class="q-grid-popup-actions" flex="none">
			<button mat-button (click)="$columnChooser.cancel.execute()">
				Cancel
			</button>
			<button mat-button color="primary" (click)="$columnChooser.submit.execute()">
				Apply
			</button>
		</div>
	</div>
</ng-template>
